<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblical Wisdom - Path to Awareness and Growth</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="bubble-background">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>
    <button id="themeToggle" class="theme-toggle">
        <i class="fas fa-moon"></i>
    </button>
    <div class="app-container">
        <header class="main-header">
            <div class="header-content">
                <h1>Path to Awareness and Growth</h1>
                <p class="header-subtitle">Begin your journey to self-discovery</p>
                <!-- Add profile container -->
                <div id="profileContainer" class="profile-container">
                    <div class="profile-wrapper">
                        <img id="profilePicture" alt="Profile" class="profile-picture">
                        <div id="profileMenu" class="profile-menu">
                            <div class="profile-menu-item" onclick="openMyAccountModal()">
                                My Account
                            </div>
                            <div class="profile-menu-logout" onclick="logout()">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Logout</span>
                            </div>
                        </div>
                    </div>
                    <span id="userEmail" class="user-email"></span>
                </div>
            </div>
        </header>

        <nav class="main-nav">
            <a href="home.html" class="nav-button" target="_self">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="plan.html" class="nav-button" target="_self">
                <i class="fas fa-map"></i>
                <span>Plan</span>
            </a>
            <a href="bible.html" class="nav-button active" target="_self">
                <i class="fas fa-book"></i>
                <span>Bible</span>
            </a>
            <a href="contacts.html" class="nav-button" target="_self">
                <i class="fas fa-address-book"></i>
                <span>Contacts</span>
            </a>
        </nav>

        <main class="main-content">
            <div class="section-header">
                <h2>Biblical Wisdom</h2>
                <p>Find guidance and inspiration in sacred texts</p>
            </div>

            <div class="scripture-container">
                <div style="display: flex; flex-direction: column; gap: 2rem;">
                    <div class="daily-verse" style="cursor: pointer;" onclick="openPeterModal()">
                        <div class="verse-header">
                            <i class="fas fa-book-open"></i>
                            <h3>Scripture of Comfort</h3>
                        </div>
                        <blockquote>
                            "Cast all your anxiety on him because he cares for you."
                            <footer>- 1 Peter 5:7</footer>
                        </blockquote>
                    </div>

                    <div class="daily-verse" style="cursor: pointer;" onclick="openIsaiahModal()">
                        <div class="verse-header">
                            <i class="fas fa-book-open"></i>
                            <h3>Scripture of Strength</h3>
                        </div>
                        <blockquote>
                            "For I am the LORD your God who takes hold of your right hand and says to you, Do not fear; I will help you."
                            <footer>- Isaiah 41:13</footer>
                        </blockquote>
                    </div>

                    <div class="daily-verse" style="cursor: pointer;" onclick="openGalatiansModal()">
                        <div class="verse-header">
                            <i class="fas fa-book-open"></i>
                            <h3>Scripture of Purpose</h3>
                        </div>
                        <blockquote>
                            "Am I now trying to win the approval of human beings, or of God? Or am I trying to please people? If I were still trying to please people, I would not be a servant of Christ."
                            <footer>- Galatians 1:10</footer>
                        </blockquote>
                    </div>

                    <div class="daily-verse" style="cursor: pointer;" onclick="openJohnModal()">
                        <div class="verse-header">
                            <i class="fas fa-book-open"></i>
                            <h3>Scripture of Worldly Desires</h3>
                        </div>
                        <blockquote>
                            "Do not love the world or anything in the world. If anyone loves the world, love for the Father is not in them. For everything in the world—the lust of the flesh, the lust of the eyes, and the pride of life—comes not from the Father but from the world."
                            <footer>- 1 John 2:15-16</footer>
                        </blockquote>
                    </div>

                    <div class="daily-verse" style="cursor: pointer;" onclick="openIsaiah43Modal()">
                        <div class="verse-header">
                            <i class="fas fa-book-open"></i>
                            <h3>Scripture of Divine Protection</h3>
                        </div>
                        <blockquote>
                            "When you pass through the waters, I will be with you; and when you pass through the rivers, they will not sweep over you. When you walk through the fire, you will not be burned; the flames will not set you ablaze."
                            <footer>- Isaiah 43:2</footer>
                        </blockquote>
                    </div>
                </div>
                
                <div class="reflection-card" style="height: fit-content;">
                    <div class="reflection-header">
                        <i class="fas fa-feather"></i>
                        <h3>Today's Reflection</h3>
                    </div>
                    
                    <!-- Personal Reflection -->
                    <div id="personalReflection" class="reflection-content">
                        <p>Reflect on how today's verses relate to your personal life and current challenges.</p>
                        <textarea class="reflection-input" placeholder="What personal insights or lessons can you draw from these verses?"></textarea>
                    </div>

                    <!-- Spiritual Reflection -->
                    <div id="spiritualReflection" class="reflection-content" style="display: none;">
                        <p>Consider how these verses deepen your spiritual understanding and faith journey.</p>
                        <textarea class="reflection-input" placeholder="How do these verses strengthen your spiritual connection?"></textarea>
                    </div>

                    <!-- Gratitude Reflection -->
                    <div id="gratitudeReflection" class="reflection-content" style="display: none;">
                        <p>Express gratitude for the blessings and guidance found in today's verses.</p>
                        <textarea class="reflection-input" placeholder="What are you thankful for in light of these verses?"></textarea>
                    </div>

                    <!-- Add floating action buttons -->
                    <div class="reflection-action-buttons">
                        <button onclick="switchTab('personal')" id="personalBtn" class="reflection-fab active" title="Personal Reflection">
                            <i class="fas fa-user"></i>
                        </button>
                        <button onclick="switchTab('spiritual')" id="spiritualBtn" class="reflection-fab" title="Spiritual Reflection">
                            <i class="fas fa-pray"></i>
                        </button>
                        <button onclick="switchTab('gratitude')" id="gratitudeBtn" class="reflection-fab" title="Gratitude Reflection">
                            <i class="fas fa-heart"></i>
                        </button>
                        <button onclick="openMyAccountModal()" class="reflection-fab" title="My Reflections">
                            <i class="fas fa-book"></i>
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- 1 Peter 5:7 Modal -->
        <div id="peterModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closePeterModal()">&times;</span>
                <h2>Understanding 1 Peter 5:7</h2>
                
                <div class="action-group">
                    <h3><i class="fas fa-book"></i> Context</h3>
                    <p>This verse comes from Peter's first epistle, written to encourage Christians facing persecution and hardship. Peter, who himself learned to trust Jesus through many challenges, offers this profound comfort.</p>
                </div>

                <div class="action-group">
                    <h3><i class="fas fa-heart"></i> Meaning</h3>
                    <ul class="action-list">
                        <li>God actively cares about your personal struggles</li>
                        <li>You can release your burdens to God</li>
                        <li>Anxiety doesn't have to control your life</li>
                        <li>Trust in God's loving care for you</li>
                    </ul>
                </div>

                <div class="action-group">
                    <h3><i class="fas fa-hands"></i> Application</h3>
                    <ul class="action-list">
                        <li>Practice giving your worries to God through prayer</li>
                        <li>Remember God's care when feeling anxious</li>
                        <li>Trust God's ability to handle your concerns</li>
                        <li>Share this comfort with others who are struggling</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Isaiah 41:13 Modal -->
        <div id="isaiahModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeIsaiahModal()">&times;</span>
                <h2>Understanding Isaiah 41:13</h2>
                
                <div class="action-group">
                    <h3><i class="fas fa-book"></i> Context</h3>
                    <p>This verse is part of God's message of comfort to Israel during a time of national crisis. Isaiah delivers God's personal promise of presence and help to His people.</p>
                </div>

                <div class="action-group">
                    <h3><i class="fas fa-heart"></i> Meaning</h3>
                    <ul class="action-list">
                        <li>God is personally involved in your life</li>
                        <li>Divine strength is available in times of fear</li>
                        <li>God's presence is constant and supportive</li>
                        <li>You're never alone in your struggles</li>
                    </ul>
                </div>

                <div class="action-group">
                    <h3><i class="fas fa-hands"></i> Application</h3>
                    <ul class="action-list">
                        <li>Face challenges knowing God is with you</li>
                        <li>Let God's strength replace your fear</li>
                        <li>Trust in God's guidance and support</li>
                        <li>Share God's promise of help with others</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Galatians 1:10 Modal -->
        <div id="galatiansModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeGalatiansModal()">&times;</span>
                <h2>Understanding Galatians 1:10</h2>
                
                <div class="action-group">
                    <h3><i class="fas fa-book"></i> Context</h3>
                    <p>Paul wrote this to the Galatian church, addressing those who questioned his authority and message. He emphasizes the importance of staying true to God's calling rather than seeking human approval.</p>
                </div>

                <div class="action-group">
                    <h3><i class="fas fa-heart"></i> Meaning</h3>
                    <ul class="action-list">
                        <li>True service to God may not always please people</li>
                        <li>Seeking human approval can conflict with God's will</li>
                        <li>Authentic faith requires genuine commitment</li>
                        <li>God's approval matters more than social acceptance</li>
                    </ul>
                </div>

                <div class="action-group">
                    <h3><i class="fas fa-hands"></i> Application</h3>
                    <ul class="action-list">
                        <li>Evaluate your motivations in serving God</li>
                        <li>Choose God's approval over social pressure</li>
                        <li>Stand firm in your faith despite opposition</li>
                        <li>Focus on authentic service rather than pleasing others</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 1 John Modal -->
        <div id="johnModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeJohnModal()">&times;</span>
                <h2>Understanding 1 John 2:15-16</h2>
                
                <div class="action-group">
                    <h3><i class="fas fa-book"></i> Context</h3>
                    <p>This passage comes from John's first epistle, where he warns believers about the dangers of worldly attachments and desires that can draw us away from God's love and purpose.</p>
                </div>

                <div class="action-group">
                    <h3><i class="fas fa-heart"></i> Meaning</h3>
                    <ul class="action-list">
                        <li>The "world" refers to the system of values opposed to God</li>
                        <li>Worldly desires compete with love for God</li>
                        <li>Three main temptations: physical desires, materialism, and pride</li>
                        <li>These desires are temporary and unfulfilling</li>
                    </ul>
                </div>

                <div class="action-group">
                    <h3><i class="fas fa-hands"></i> Application</h3>
                    <ul class="action-list">
                        <li>Examine your priorities and attachments</li>
                        <li>Choose eternal values over temporary pleasures</li>
                        <li>Guard against materialism and pride</li>
                        <li>Cultivate love for God above worldly desires</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Isaiah 43:2 Modal -->
        <div id="isaiah43Modal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeIsaiah43Modal()">&times;</span>
                <h2>Understanding Isaiah 43:2</h2>
                
                <div class="action-group">
                    <h3><i class="fas fa-book"></i> Context</h3>
                    <p>This verse is part of God's message of comfort and protection to Israel. Isaiah delivers a powerful promise of divine presence and protection during times of trial and difficulty.</p>
                </div>

                <div class="action-group">
                    <h3><i class="fas fa-heart"></i> Meaning</h3>
                    <ul class="action-list">
                        <li>God's presence is constant in all circumstances</li>
                        <li>Divine protection is available in times of trouble</li>
                        <li>No situation is beyond God's control</li>
                        <li>God's promises are reliable and enduring</li>
                    </ul>
                </div>

                <div class="action-group">
                    <h3><i class="fas fa-hands"></i> Application</h3>
                    <ul class="action-list">
                        <li>Trust in God's protection during difficult times</li>
                        <li>Remember God's presence in all situations</li>
                        <li>Find strength in God's promises</li>
                        <li>Share this comfort with others facing challenges</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- AI Chat Feature -->
        <div class="chat-widget">
            <button class="chat-toggle" aria-label="Toggle chat">
                <i class="fas fa-comments"></i>
            </button>
            
            <div class="chat-container">
                <div class="chat-header">
                    <h3>Spiritual Guide</h3>
                    <div class="chat-actions">
                        <button class="settings-button" title="Settings">
                            <i class="fas fa-cog"></i>
                        </button>
                        <button class="close-chat" title="Close">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <div class="chat-messages"></div>
                
                <div class="chat-input-container">
                    <textarea class="chat-input" placeholder="Share your thoughts..." rows="3"></textarea>
                    <button class="send-message" title="Send">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- My Account Modal -->
        <div id="myAccountModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeMyAccountModal()">&times;</span>
                <h2>My Account</h2>

                <div class="action-group">
                    <h3><i class="fas fa-book"></i> My Reflections</h3>
                    <div id="reflectionHistory" style="max-height: 300px; overflow-y: auto; padding: 1rem; background: var(--background); border-radius: var(--radius-sm); margin-bottom: 2rem;">
                        <!-- Reflection entries will be added here dynamically -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* Remove old tab styles and add new FAB styles */
        .reflection-fab {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--background);
            color: var(--text);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .reflection-fab:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            background: var(--accent);
            color: var(--primary);
        }

        .reflection-fab.active {
            background: var(--primary);
            color: white;
        }

        .reflection-content {
            margin-top: 1rem;
            padding-bottom: 3rem;
        }

        .reflection-content p {
            margin-bottom: 1rem;
            color: var(--text);
            font-size: 0.95rem;
        }

        .reflection-input {
            margin-bottom: 1rem;
        }
    </style>

    <script src="js/main.js"></script>
    <script>
        // Modal functionality
        function openPeterModal() {
            document.getElementById('peterModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closePeterModal() {
            document.getElementById('peterModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function openIsaiahModal() {
            document.getElementById('isaiahModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeIsaiahModal() {
            document.getElementById('isaiahModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function openGalatiansModal() {
            document.getElementById('galatiansModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeGalatiansModal() {
            document.getElementById('galatiansModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function openJohnModal() {
            document.getElementById('johnModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeJohnModal() {
            document.getElementById('johnModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function openIsaiah43Modal() {
            document.getElementById('isaiah43Modal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeIsaiah43Modal() {
            document.getElementById('isaiah43Modal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            const peterModal = document.getElementById('peterModal');
            const isaiahModal = document.getElementById('isaiahModal');
            const galatiansModal = document.getElementById('galatiansModal');
            const johnModal = document.getElementById('johnModal');
            const isaiah43Modal = document.getElementById('isaiah43Modal');
            
            if (event.target == peterModal) {
                closePeterModal();
            }
            if (event.target == isaiahModal) {
                closeIsaiahModal();
            }
            if (event.target == galatiansModal) {
                closeGalatiansModal();
            }
            if (event.target == johnModal) {
                closeJohnModal();
            }
            if (event.target == isaiah43Modal) {
                closeIsaiah43Modal();
            }
        }

        // Update the switchTab function for FAB behavior
        function switchTab(tabName) {
            // Hide all reflection contents
            document.querySelectorAll('.reflection-content').forEach(content => {
                content.style.display = 'none';
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.reflection-fab').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected content and activate button
            document.getElementById(tabName + 'Reflection').style.display = 'block';
            document.getElementById(tabName + 'Btn').classList.add('active');
        }

        function saveReflection() {
            const activeTab = document.querySelector('.reflection-fab.active').id.replace('Btn', '');
            const reflectionText = document.querySelector(`#${activeTab}Reflection textarea`).value.trim();
            
            if (reflectionText) {
                const reflections = JSON.parse(localStorage.getItem('reflections') || '[]');
                reflections.push({
                    type: activeTab,
                    text: reflectionText,
                    date: new Date().toISOString()
                });
                localStorage.setItem('reflections', JSON.stringify(reflections));
                
                // Clear the textarea
                document.querySelector(`#${activeTab}Reflection textarea`).value = '';
                
                // Update reflection history if modal is open
                updateReflectionHistory();
            }
        }

        function updateReflectionHistory() {
            const reflectionHistory = document.getElementById('reflectionHistory');
            const reflections = JSON.parse(localStorage.getItem('reflections') || '[]');
            
            reflectionHistory.innerHTML = reflections.length ? '' : '<p style="color: var(--text-light);">No reflections yet.</p>';
            
            reflections.reverse().forEach((reflection, index) => {
                const date = new Date(reflection.date).toLocaleDateString();
                const typeIcon = {
                    personal: 'user',
                    spiritual: 'pray',
                    gratitude: 'heart'
                }[reflection.type];
                
                reflectionHistory.innerHTML += `
                    <div style="border-bottom: 1px solid var(--border); padding: 1rem 0; margin-bottom: 1rem;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <i class="fas fa-${typeIcon}" style="color: var(--primary);"></i>
                            <span style="font-weight: 600; color: var(--primary);">${reflection.type.charAt(0).toUpperCase() + reflection.type.slice(1)} Reflection</span>
                            <span style="margin-left: auto; color: var(--text-light); font-size: 0.9rem;">${date}</span>
                            <button onclick="deleteReflection(${index})" style="background: none; border: none; color: var(--text-light); cursor: pointer; padding: 0.25rem; margin-left: 0.5rem; transition: color 0.3s ease;">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                        <p style="color: var(--text); line-height: 1.5;">${reflection.text}</p>
                    </div>
                `;
            });
        }

        function deleteReflection(index) {
            const reflections = JSON.parse(localStorage.getItem('reflections') || '[]');
            reflections.reverse(); // Reverse to match the display order
            reflections.splice(index, 1); // Remove the reflection at the index
            reflections.reverse(); // Reverse back to original order
            localStorage.setItem('reflections', JSON.stringify(reflections));
            updateReflectionHistory(); // Refresh the display
        }

        // Add event listeners for saving reflections
        document.querySelectorAll('.reflection-input').forEach(textarea => {
            textarea.addEventListener('change', saveReflection);
        });

        // Update reflection history when opening modal
        const originalOpenMyAccountModal = openMyAccountModal;
        openMyAccountModal = function() {
            originalOpenMyAccountModal();
            updateReflectionHistory();
        };

        // Add profile picture click handler
        document.addEventListener('DOMContentLoaded', () => {
            const profilePic = document.getElementById('profilePicture');
            const profileMenu = document.getElementById('profileMenu');
            
            if (profilePic) {
                profilePic.addEventListener('click', (e) => {
                    e.stopPropagation();
                    profileMenu.style.display = profileMenu.style.display === 'none' ? 'block' : 'none';
                });
            }
            
            // Close menu when clicking outside
            document.addEventListener('click', () => {
                if (profileMenu) {
                    profileMenu.style.display = 'none';
                }
            });

            // Check if user was previously logged in
            const userEmail = localStorage.getItem('userEmail');
            const profilePicUrl = localStorage.getItem('profilePicUrl');
            if (userEmail && profilePicUrl) {
                document.getElementById('profilePicture').src = profilePicUrl;
                document.getElementById('userEmail').textContent = userEmail;
                document.getElementById('profileContainer').style.display = 'flex';
            }
        });

        function logout() {
            // Clear all user-related data from localStorage
            localStorage.removeItem('userPreference');
            localStorage.removeItem('userEmail');
            localStorage.removeItem('profilePicUrl');
            
            // Reset UI
            document.getElementById('profileContainer').style.display = 'none';
            location.reload();
        }

        function openMyAccountModal() {
            document.getElementById('myAccountModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            document.getElementById('profileMenu').style.display = 'none';
            updateReflectionHistory();
        }

        function closeMyAccountModal() {
            document.getElementById('myAccountModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const icon = themeToggle.querySelector('i');
        
        // Check for saved theme preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            document.body.setAttribute('data-theme', savedTheme);
            icon.className = savedTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        }
        
        // Toggle theme
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update icon
            icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        });
    </script>
</body>

</html> 